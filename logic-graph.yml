schema: 1
plugins:
  - ./plugins/bh_veritas_plugins
nodes:
  - id: Article
    type: artifact
    description: "The main article in Markdown."
    value: article_blackhole_inevitable_en.md

  - id: PythonCalc
    type: artifact
    description: "Python script that calculates the singularity timeline."
    value: get_phi_years.py

  - id: LeanProject
    type: artifact
    description: "Lean project that formalizes the core mathematical claims."
    value: .

  - id: GrowthPlot
    type: artifact
    value: viz/growth_curves.png

  - id: RobustPlot
    type: artifact
    value: viz/robust_recal.png

  - id: DropletPlot
    type: artifact
    value: viz/info_droplet.png

  - id: SensitivityCheck
    type: artifact
    value: plugins/bh_veritas_plugins/checks.py

  - id: StorageEconomics
    type: artifact
    value: scripts/storage_simple.py


  
  - id: SilenceFlow
    type: artifact
    description: "Flowchart showing all paths lead to silence."
    value: build/artifacts/silence_flow.png

  - id: SensitivityTR
    type: artifact
    description: "Sensitivity of t(r) as r â†’ 1+."
    value: build/artifacts/sensitivity_tr.png

  - id: CleanMarkdown
    type: artifact
    description: "Clean markdown version without Veritas tags."
    value: build/artifacts/article_blackhole_inevitable_clean.md

  - id: PDFArticle
    type: artifact
    description: "PDF version of the article compiled from LaTeX."
    value: build/artifacts/article_blackhole_inevitable.pdf

  - id: DOCXArticle
    type: artifact
    description: "DOCX version of the article for MDPI submission."
    value: build/artifacts/article_blackhole_inevitable.docx

  - id: DOCXValidated
    type: artifact
    description: "DOCX validated for embedded images and size."
    value: build/artifacts/article_blackhole_inevitable.docx

  - id: PandocTool
    type: artifact
    description: "Pandoc installation check."
    value: .

  - id: CleanArtifacts
    type: artifact
    description: "Clean old artifacts before regeneration."
    value: build/artifacts

edges:
  - from: Article
    to: CleanArtifacts
    obligation: bh_cleanup_artifacts

  - from: Article
    to: CleanMarkdown
    obligation: bh_markdown_fill

  - from: CleanMarkdown
    to: CleanMarkdown
    obligation: bh_clean_markdown_compile

  - from: CleanArtifacts
    to: PythonCalc
    obligation: bh_python_timeline_check
    meta:
      expected_years: 192

  - from: Article
    to: LeanProject
    obligation: bh_lean_proof_check

  - from: CleanArtifacts
    to: GrowthPlot
    obligation: bh_generate_growth_plot

  - from: CleanArtifacts
    to: RobustPlot
    obligation: bh_generate_robust_plot

  - from: CleanArtifacts
    to: DropletPlot
    obligation: bh_generate_droplet_plot

  - from: CleanArtifacts
    to: SilenceFlow
    obligation: bh_generate_silence_flow

  - from: CleanArtifacts
    to: SensitivityTR
    obligation: bh_generate_sensitivity_plot

  - from: GrowthPlot
    to: GrowthPlot
    obligation: growth_curve_png_check

  - from: SensitivityTR
    to: SensitivityTR
    obligation: sens_tr_png_check

  - from: RobustPlot
    to: RobustPlot
    obligation: robust_png_check

  - from: DropletPlot
    to: DropletPlot
    obligation: droplet_png_check

  - from: Article
    to: SilenceFlow
    obligation: silence_flow_png_check

  - from: Article
    to: SensitivityCheck
    obligation: article_table_check

  - from: Article
    to: StorageEconomics
    obligation: storage_simple_check

  - from: Article
    to: StorageEconomics
    obligation: storage_simple_content_check

  - from: Article
    to: PythonCalc
    obligation: centralization_energy_check

  - from: Article
    to: PythonCalc
    obligation: values_consistency_check

  - from: Article
    to: Article
    obligation: values_resolved_check

  - from: CleanMarkdown
    to: CleanMarkdown
    obligation: clean_markdown_no_tags_check

  - from: Article
    to: Article
    obligation: physics_constants_check

  - from: Article
    to: Article
    obligation: lean_anchor_check

  - from: Article
    to: Article
    obligation: compare_sharded_mention_check

  - from: PandocTool
    to: PDFArticle
    obligation: bh_pandoc_check

  - from: GrowthPlot
    to: PDFArticle
    obligation: growth_curve_png_check

  - from: RobustPlot
    to: PDFArticle
    obligation: robust_png_check

  - from: SensitivityTR
    to: PDFArticle
    obligation: sens_tr_png_check

  - from: SilenceFlow
    to: PDFArticle
    obligation: silence_flow_png_check

  - from: DropletPlot
    to: PDFArticle
    obligation: droplet_png_check

  - from: CleanMarkdown
    to: PDFArticle
    obligation: bh_latex_pdf_compile

  
  - from: CleanMarkdown
    to: DOCXArticle
    obligation: bh_docx_compile

  - from: GrowthPlot
    to: DOCXArticle
    obligation: growth_curve_png_check
  - from: RobustPlot
    to: DOCXArticle
    obligation: robust_png_check
  - from: SensitivityTR
    to: DOCXArticle
    obligation: sens_tr_png_check
  - from: SilenceFlow
    to: DOCXArticle
    obligation: silence_flow_png_check
  - from: DropletPlot
    to: DOCXArticle
    obligation: droplet_png_check

  - from: DOCXArticle
    to: DOCXValidated
    obligation: docx_embed_check